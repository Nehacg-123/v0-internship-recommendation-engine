"use client"

import type React from "react"

import { useState, useRef, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { ScrollArea } from "@/components/ui/scroll-area"
import { MessageCircle, X, Send, Bot, User } from "lucide-react"
import { useLanguage } from "./language-provider"

interface Message {
  id: string
  type: "user" | "bot"
  content: string
  timestamp: Date
}

interface ChatbotProps {
  userProfile?: any
}

export function AIChatbot({ userProfile }: ChatbotProps) {
  const [isOpen, setIsOpen] = useState(false)
  const [messages, setMessages] = useState<Message[]>([])
  const [inputValue, setInputValue] = useState("")
  const [isTyping, setIsTyping] = useState(false)
  const messagesEndRef = useRef<HTMLDivElement>(null)
  const { t, language } = useLanguage()

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" })
  }

  useEffect(() => {
    scrollToBottom()
  }, [messages])

  useEffect(() => {
    if (isOpen && messages.length === 0) {
      // Send welcome message when chatbot opens
      const welcomeMessage = getWelcomeMessage()
      setMessages([
        {
          id: Date.now().toString(),
          type: "bot",
          content: welcomeMessage,
          timestamp: new Date(),
        },
      ])
    }
  }, [isOpen, language])

  const getWelcomeMessage = () => {
    const greetings = {
      en: `Hello! I'm your PM Internship assistant. I can help you with:
â€¢ How to upload and optimize your resume
â€¢ Understanding match percentages
â€¢ Improving your skills for better matches
â€¢ General questions about the PM Internship Scheme
â€¢ Skill improvement recommendations

What would you like to know?`,
      hi: `à¤¨à¤®à¤¸à¥à¤¤à¥‡! à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¤¾ PM à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤¸à¤¹à¤¾à¤¯à¤• à¤¹à¥‚à¤‚à¥¤ à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¤¾ à¤¹à¥‚à¤‚:
â€¢ à¤°à¤¿à¤œà¥à¤¯à¥‚à¤®à¥‡ à¤…à¤ªà¤²à¥‹à¤¡ à¤”à¤° à¤‘à¤ªà¥à¤Ÿà¤¿à¤®à¤¾à¤‡à¤œà¤¼ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚
â€¢ à¤®à¥ˆà¤š à¤ªà¥à¤°à¤¤à¤¿à¤¶à¤¤ à¤¸à¤®à¤à¤¨à¥‡ à¤®à¥‡à¤‚
â€¢ à¤¬à¥‡à¤¹à¤¤à¤° à¤®à¥ˆà¤š à¤•à¥‡ à¤²à¤¿à¤ à¤•à¥Œà¤¶à¤² à¤¸à¥à¤§à¤¾à¤°à¤¨à¥‡ à¤®à¥‡à¤‚
â€¢ PM à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤¯à¥‹à¤œà¤¨à¤¾ à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚ à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤ªà¥à¤°à¤¶à¥à¤¨
â€¢ à¤•à¥Œà¤¶à¤² à¤¸à¥à¤§à¤¾à¤° à¤•à¥€ à¤¸à¤¿à¤«à¤¾à¤°à¤¿à¤¶à¥‡à¤‚

à¤†à¤ª à¤•à¥à¤¯à¤¾ à¤œà¤¾à¤¨à¤¨à¤¾ à¤šà¤¾à¤¹à¥‡à¤‚à¤—à¥‡?`,
      kn: `à²¨à²®à²¸à³à²•à²¾à²°! à²¨à²¾à²¨à³ à²¨à²¿à²®à³à²® PM à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²¸à²¹à²¾à²¯à²•. à²¨à²¾à²¨à³ à²¨à²¿à²®à²—à³† à²¸à²¹à²¾à²¯ à²®à²¾à²¡à²¬à²¹à³à²¦à³:
â€¢ à²°à³†à²¸à³à²¯à³‚à²®à³ à²…à²ªà³â€Œà²²à³‹à²¡à³ à²®à²¤à³à²¤à³ à²†à²ªà³à²Ÿà²¿à²®à³ˆà²¸à³ à²®à²¾à²¡à³à²µà³à²¦à³
â€¢ à²®à³à²¯à²¾à²šà³ à²¶à³‡à²•à²¡à²¾à²µà²¾à²°à³ à²…à²°à³à²¥à²®à²¾à²¡à²¿à²•à³Šà²³à³à²³à³à²µà³à²¦à³
â€¢ à²‰à²¤à³à²¤à²® à²®à³à²¯à²¾à²šà³â€Œà²—à²³à²¿à²—à²¾à²—à²¿ à²•à³Œà²¶à²²à³à²¯à²—à²³à²¨à³à²¨à³ à²¸à³à²§à²¾à²°à²¿à²¸à³à²µà³à²¦à³
â€¢ PM à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²¯à³‹à²œà²¨à³†à²¯ à²¬à²—à³à²—à³† à²¸à²¾à²®à²¾à²¨à³à²¯ à²ªà³à²°à²¶à³à²¨à³†à²—à²³à³
â€¢ à²•à³Œà²¶à²²à³à²¯ à²¸à³à²§à²¾à²°à²£à³† à²¶à²¿à²«à²¾à²°à²¸à³à²—à²³à³

à²¨à³€à²µà³ à²à²¨à³ à²¤à²¿à²³à²¿à²¯à²²à³ à²¬à²¯à²¸à³à²¤à³à²¤à³€à²°à²¿?`,
      ta: `à®µà®£à®•à¯à®•à®®à¯! à®¨à®¾à®©à¯ à®‰à®™à¯à®•à®³à¯ PM à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®‰à®¤à®µà®¿à®¯à®¾à®³à®°à¯. à®¨à®¾à®©à¯ à®‰à®™à¯à®•à®³à¯à®•à¯à®•à¯ à®‰à®¤à®µ à®®à¯à®Ÿà®¿à®¯à¯à®®à¯:
â€¢ à®°à¯†à®¸à¯à®¯à¯‚à®®à¯ à®ªà®¤à®¿à®µà¯‡à®±à¯à®±à®®à¯ à®®à®±à¯à®±à¯à®®à¯ à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®¤à®²à¯
â€¢ à®ªà¯Šà®°à¯à®¤à¯à®¤ à®šà®¤à®µà¯€à®¤à®¤à¯à®¤à¯ˆ à®ªà¯à®°à®¿à®¨à¯à®¤à¯à®•à¯Šà®³à¯à®³à¯à®¤à®²à¯
â€¢ à®šà®¿à®±à®¨à¯à®¤ à®ªà¯Šà®°à¯à®¤à¯à®¤à®™à¯à®•à®³à¯à®•à¯à®•à¯ à®¤à®¿à®±à®©à¯à®•à®³à¯ˆ à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®¤à®²à¯
â€¢ PM à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®¤à®¿à®Ÿà¯à®Ÿà®®à¯ à®ªà®±à¯à®±à®¿à®¯ à®ªà¯Šà®¤à¯à®µà®¾à®© à®•à¯‡à®³à¯à®µà®¿à®•à®³à¯
â€¢ à®¤à®¿à®±à®©à¯ à®®à¯‡à®®à¯à®ªà®¾à®Ÿà¯à®Ÿà¯ à®ªà®°à®¿à®¨à¯à®¤à¯à®°à¯ˆà®•à®³à¯

à®¨à¯€à®™à¯à®•à®³à¯ à®Žà®©à¯à®© à®¤à¯†à®°à®¿à®¨à¯à®¤à¯à®•à¯Šà®³à¯à®³ à®µà®¿à®°à¯à®®à¯à®ªà¯à®•à®¿à®±à¯€à®°à¯à®•à®³à¯?`,
    }
    return greetings[language] || greetings.en
  }

  const getBotResponse = (userMessage: string): string => {
    const lowerMessage = userMessage.toLowerCase()

    // Resume-related questions
    if (lowerMessage.includes("resume") || lowerMessage.includes("cv") || lowerMessage.includes("upload")) {
      const responses = {
        en: `To upload your resume effectively:
1. Go to your Profile Setup page
2. Click "Choose File" in the Resume section
3. Select a PDF or DOC file (max 5MB)
4. Our system will automatically extract your skills
5. Review and add any missing skills manually

Tips for a better resume:
â€¢ Use clear section headers (Education, Experience, Skills)
â€¢ List specific technical skills
â€¢ Include relevant project experience
â€¢ Keep it concise (1-2 pages)`,
        hi: `à¤…à¤ªà¤¨à¤¾ à¤°à¤¿à¤œà¥à¤¯à¥‚à¤®à¥‡ à¤ªà¥à¤°à¤­à¤¾à¤µà¥€ à¤°à¥‚à¤ª à¤¸à¥‡ à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤:
1. à¤…à¤ªà¤¨à¥‡ à¤ªà¥à¤°à¥‹à¤«à¤¾à¤‡à¤² à¤¸à¥‡à¤Ÿà¤…à¤ª à¤ªà¥‡à¤œ à¤ªà¤° à¤œà¤¾à¤à¤‚
2. à¤°à¤¿à¤œà¥à¤¯à¥‚à¤®à¥‡ à¤¸à¥‡à¤•à¥à¤¶à¤¨ à¤®à¥‡à¤‚ "à¤«à¤¾à¤‡à¤² à¤šà¥à¤¨à¥‡à¤‚" à¤ªà¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚
3. PDF à¤¯à¤¾ DOC à¤«à¤¾à¤‡à¤² à¤šà¥à¤¨à¥‡à¤‚ (à¤…à¤§à¤¿à¤•à¤¤à¤® 5MB)
4. à¤¹à¤®à¤¾à¤°à¤¾ à¤¸à¤¿à¤¸à¥à¤Ÿà¤® à¤†à¤ªà¤•à¥‡ à¤•à¥Œà¤¶à¤² à¤•à¥‹ à¤¸à¥à¤µà¤šà¤¾à¤²à¤¿à¤¤ à¤°à¥‚à¤ª à¤¸à¥‡ à¤¨à¤¿à¤•à¤¾à¤²à¥‡à¤—à¤¾
5. à¤¸à¤®à¥€à¤•à¥à¤·à¤¾ à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤•à¥‹à¤ˆ à¤­à¥€ à¤—à¥à¤® à¤•à¥Œà¤¶à¤² à¤®à¥ˆà¤¨à¥à¤¯à¥à¤…à¤² à¤°à¥‚à¤ª à¤¸à¥‡ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚

à¤¬à¥‡à¤¹à¤¤à¤° à¤°à¤¿à¤œà¥à¤¯à¥‚à¤®à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤Ÿà¤¿à¤ªà¥à¤¸:
â€¢ à¤¸à¥à¤ªà¤·à¥à¤Ÿ à¤¸à¥‡à¤•à¥à¤¶à¤¨ à¤¹à¥‡à¤¡à¤° à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚
â€¢ à¤µà¤¿à¤¶à¤¿à¤·à¥à¤Ÿ à¤¤à¤•à¤¨à¥€à¤•à¥€ à¤•à¥Œà¤¶à¤² à¤¸à¥‚à¤šà¥€à¤¬à¤¦à¥à¤§ à¤•à¤°à¥‡à¤‚
â€¢ à¤ªà¥à¤°à¤¾à¤¸à¤‚à¤—à¤¿à¤• à¤ªà¥à¤°à¥‹à¤œà¥‡à¤•à¥à¤Ÿ à¤…à¤¨à¥à¤­à¤µ à¤¶à¤¾à¤®à¤¿à¤² à¤•à¤°à¥‡à¤‚`,
        kn: `à²¨à²¿à²®à³à²® à²°à³†à²¸à³à²¯à³‚à²®à³ à²…à²¨à³à²¨à³ à²ªà²°à²¿à²£à²¾à²®à²•à²¾à²°à²¿à²¯à²¾à²—à²¿ à²…à²ªà³â€Œà²²à³‹à²¡à³ à²®à²¾à²¡à²²à³:
1. à²¨à²¿à²®à³à²® à²ªà³à²°à³Šà²«à³ˆà²²à³ à²¸à³†à²Ÿà²ªà³ à²ªà³à²Ÿà²•à³à²•à³† à²¹à³‹à²—à²¿
2. à²°à³†à²¸à³à²¯à³‚à²®à³ à²µà²¿à²­à²¾à²—à²¦à²²à³à²²à²¿ "à²«à³ˆà²²à³ à²†à²¯à³à²•à³†à²®à²¾à²¡à²¿" à²•à³à²²à²¿à²•à³ à²®à²¾à²¡à²¿
3. PDF à²…à²¥à²µà²¾ DOC à²«à³ˆà²²à³ à²†à²¯à³à²•à³†à²®à²¾à²¡à²¿ (à²—à²°à²¿à²·à³à²  5MB)
4. à²¨à²®à³à²® à²¸à²¿à²¸à³à²Ÿà²‚ à²¨à²¿à²®à³à²® à²•à³Œà²¶à²²à³à²¯à²—à²³à²¨à³à²¨à³ à²¸à³à²µà²¯à²‚à²šà²¾à²²à²¿à²¤à²µà²¾à²—à²¿ à²¹à³Šà²°à²¤à³†à²—à³†à²¯à³à²¤à³à²¤à²¦à³†
5. à²ªà²°à²¿à²¶à³€à²²à²¿à²¸à²¿ à²®à²¤à³à²¤à³ à²•à²¾à²£à³†à²¯à²¾à²¦ à²•à³Œà²¶à²²à³à²¯à²—à²³à²¨à³à²¨à³ à²¹à²¸à³à²¤à²šà²¾à²²à²¿à²¤à²µà²¾à²—à²¿ à²¸à³‡à²°à²¿à²¸à²¿`,
        ta: `à®‰à®™à¯à®•à®³à¯ à®°à¯†à®¸à¯à®¯à¯‚à®®à¯ˆ à®¤à®¿à®±à®®à¯à®ªà®Ÿ à®ªà®¤à®¿à®µà¯‡à®±à¯à®±:
1. à®‰à®™à¯à®•à®³à¯ à®šà¯à®¯à®µà®¿à®µà®° à®…à®®à¯ˆà®ªà¯à®ªà¯ à®ªà®•à¯à®•à®¤à¯à®¤à®¿à®±à¯à®•à¯ à®šà¯†à®²à¯à®²à®µà¯à®®à¯
2. à®°à¯†à®¸à¯à®¯à¯‚à®®à¯ à®ªà®¿à®°à®¿à®µà®¿à®²à¯ "à®•à¯‹à®ªà¯à®ªà¯ à®¤à¯‡à®°à¯à®µà¯" à®•à®¿à®³à®¿à®•à¯ à®šà¯†à®¯à¯à®¯à®µà¯à®®à¯
3. PDF à®…à®²à¯à®²à®¤à¯ DOC à®•à¯‹à®ªà¯à®ªà¯ à®¤à¯‡à®°à¯à®µà¯ à®šà¯†à®¯à¯à®¯à®µà¯à®®à¯ (à®…à®¤à®¿à®•à®ªà®Ÿà¯à®šà®®à¯ 5MB)
4. à®Žà®™à¯à®•à®³à¯ à®…à®®à¯ˆà®ªà¯à®ªà¯ à®‰à®™à¯à®•à®³à¯ à®¤à®¿à®±à®©à¯à®•à®³à¯ˆ à®¤à®¾à®©à®¾à®•à®µà¯‡ à®ªà®¿à®°à®¿à®¤à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à¯à®®à¯
5. à®®à®¤à®¿à®ªà¯à®ªà®¾à®¯à¯à®µà¯ à®šà¯†à®¯à¯à®¤à¯ à®µà®¿à®Ÿà¯à®ªà®Ÿà¯à®Ÿ à®¤à®¿à®±à®©à¯à®•à®³à¯ˆ à®•à¯ˆà®®à¯à®±à¯ˆà®¯à®¾à®• à®šà¯‡à®°à¯à®•à¯à®•à®µà¯à®®à¯`,
      }
      return responses[language] || responses.en
    }

    // Match percentage questions
    if (lowerMessage.includes("match") || lowerMessage.includes("percentage") || lowerMessage.includes("%")) {
      const responses = {
        en: `Match percentage is calculated based on:

ðŸŽ¯ Skills Match (40%): How many of your skills match the internship requirements
ðŸ“š Education Fit (20%): Your education level vs. internship requirements  
ðŸ¢ Sector Match (20%): Your sector interests vs. internship sector
ðŸ“ Location (20%): Your location preference vs. internship location

Higher percentages mean better fit! Aim for 70%+ matches for the best opportunities.`,
        hi: `à¤®à¥ˆà¤š à¤ªà¥à¤°à¤¤à¤¿à¤¶à¤¤ à¤•à¥€ à¤—à¤£à¤¨à¤¾ à¤‡à¤¸ à¤†à¤§à¤¾à¤° à¤ªà¤° à¤•à¥€ à¤œà¤¾à¤¤à¥€ à¤¹à¥ˆ:

ðŸŽ¯ à¤•à¥Œà¤¶à¤² à¤®à¥ˆà¤š (40%): à¤†à¤ªà¤•à¥‡ à¤•à¤¿à¤¤à¤¨à¥‡ à¤•à¥Œà¤¶à¤² à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤†à¤µà¤¶à¥à¤¯à¤•à¤¤à¤¾à¤“à¤‚ à¤¸à¥‡ à¤®à¥‡à¤² à¤–à¤¾à¤¤à¥‡ à¤¹à¥ˆà¤‚
ðŸ“š à¤¶à¤¿à¤•à¥à¤·à¤¾ à¤«à¤¿à¤Ÿ (20%): à¤†à¤ªà¤•à¤¾ à¤¶à¤¿à¤•à¥à¤·à¤¾ à¤¸à¥à¤¤à¤° à¤¬à¤¨à¤¾à¤® à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤†à¤µà¤¶à¥à¤¯à¤•à¤¤à¤¾à¤à¤‚
ðŸ¢ à¤¸à¥‡à¤•à¥à¤Ÿà¤° à¤®à¥ˆà¤š (20%): à¤†à¤ªà¤•à¥‡ à¤¸à¥‡à¤•à¥à¤Ÿà¤° à¤¹à¤¿à¤¤ à¤¬à¤¨à¤¾à¤® à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤¸à¥‡à¤•à¥à¤Ÿà¤°
ðŸ“ à¤¸à¥à¤¥à¤¾à¤¨ (20%): à¤†à¤ªà¤•à¥€ à¤¸à¥à¤¥à¤¾à¤¨ à¤ªà¥à¤°à¤¾à¤¥à¤®à¤¿à¤•à¤¤à¤¾ à¤¬à¤¨à¤¾à¤® à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤¸à¥à¤¥à¤¾à¤¨

à¤‰à¤šà¥à¤š à¤ªà¥à¤°à¤¤à¤¿à¤¶à¤¤ à¤•à¤¾ à¤®à¤¤à¤²à¤¬ à¤¬à¥‡à¤¹à¤¤à¤° à¤«à¤¿à¤Ÿ à¤¹à¥ˆ! à¤¸à¤°à¥à¤µà¥‹à¤¤à¥à¤¤à¤® à¤…à¤µà¤¸à¤°à¥‹à¤‚ à¤•à¥‡ à¤²à¤¿à¤ 70%+ à¤®à¥ˆà¤š à¤•à¤¾ à¤²à¤•à¥à¤·à¥à¤¯ à¤°à¤–à¥‡à¤‚à¥¤`,
        kn: `à²®à³à²¯à²¾à²šà³ à²¶à³‡à²•à²¡à²¾à²µà²¾à²°à³ à²‡à²¦à²° à²†à²§à²¾à²°à²¦ à²®à³‡à²²à³† à²²à³†à²•à³à²•à²¹à²¾à²•à²²à²¾à²—à³à²¤à³à²¤à²¦à³†:

ðŸŽ¯ à²•à³Œà²¶à²²à³à²¯ à²®à³à²¯à²¾à²šà³ (40%): à²¨à²¿à²®à³à²® à²Žà²·à³à²Ÿà³ à²•à³Œà²¶à²²à³à²¯à²—à²³à³ à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²…à²µà²¶à³à²¯à²•à²¤à³†à²—à²³à²¿à²—à³† à²¹à³Šà²‚à²¦à²¿à²•à³†à²¯à²¾à²—à³à²¤à³à²¤à²µà³†
ðŸ“š à²¶à²¿à²•à³à²·à²£ à²«à²¿à²Ÿà³ (20%): à²¨à²¿à²®à³à²® à²¶à²¿à²•à³à²·à²£ à²®à²Ÿà³à²Ÿ à²µà²¿à²°à³à²¦à³à²§ à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²…à²µà²¶à³à²¯à²•à²¤à³†à²—à²³à³
ðŸ¢ à²¸à³†à²•à³à²Ÿà²°à³ à²®à³à²¯à²¾à²šà³ (20%): à²¨à²¿à²®à³à²® à²¸à³†à²•à³à²Ÿà²°à³ à²†à²¸à²•à³à²¤à²¿à²—à²³à³ à²µà²¿à²°à³à²¦à³à²§ à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²¸à³†à²•à³à²Ÿà²°à³
ðŸ“ à²¸à³à²¥à²³ (20%): à²¨à²¿à²®à³à²® à²¸à³à²¥à²³ à²†à²¦à³à²¯à²¤à³† à²µà²¿à²°à³à²¦à³à²§ à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²¸à³à²¥à²³

à²¹à³†à²šà³à²šà²¿à²¨ à²¶à³‡à²•à²¡à²¾à²µà²¾à²°à³ à²Žà²‚à²¦à²°à³† à²‰à²¤à³à²¤à²® à²«à²¿à²Ÿà³! à²…à²¤à³à²¯à³à²¤à³à²¤à²® à²…à²µà²•à²¾à²¶à²—à²³à²¿à²—à²¾à²—à²¿ 70%+ à²®à³à²¯à²¾à²šà³â€Œà²—à²³à²¨à³à²¨à³ à²—à³à²°à²¿à²¯à²¾à²—à²¿à²¸à²¿à¥¤`,
        ta: `à®ªà¯Šà®°à¯à®¤à¯à®¤ à®šà®¤à®µà¯€à®¤à®®à¯ à®‡à®¤à®©à¯ à®…à®Ÿà®¿à®ªà¯à®ªà®Ÿà¯ˆà®¯à®¿à®²à¯ à®•à®£à®•à¯à®•à®¿à®Ÿà®ªà¯à®ªà®Ÿà¯à®•à®¿à®±à®¤à¯:

ðŸŽ¯ à®¤à®¿à®±à®©à¯ à®ªà¯Šà®°à¯à®¤à¯à®¤à®®à¯ (40%): à®‰à®™à¯à®•à®³à¯ à®Žà®¤à¯à®¤à®©à¯ˆ à®¤à®¿à®±à®©à¯à®•à®³à¯ à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®¤à¯‡à®µà¯ˆà®•à®³à¯à®Ÿà®©à¯ à®ªà¯Šà®°à¯à®¨à¯à®¤à¯à®•à®¿à®©à¯à®±à®©
ðŸ“š à®•à®²à¯à®µà®¿ à®ªà¯Šà®°à¯à®¤à¯à®¤à®®à¯ (20%): à®‰à®™à¯à®•à®³à¯ à®•à®²à¯à®µà®¿ à®¨à®¿à®²à¯ˆ vs à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®¤à¯‡à®µà¯ˆà®•à®³à¯
ðŸ¢ à®¤à¯à®±à¯ˆ à®ªà¯Šà®°à¯à®¤à¯à®¤à®®à¯ (20%): à®‰à®™à¯à®•à®³à¯ à®¤à¯à®±à¯ˆ à®†à®°à¯à®µà®™à¯à®•à®³à¯ vs à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®¤à¯à®±à¯ˆ
ðŸ“ à®‡à®Ÿà®®à¯ (20%): à®‰à®™à¯à®•à®³à¯ à®‡à®Ÿ à®µà®¿à®°à¯à®ªà¯à®ªà®®à¯ vs à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®‡à®Ÿà®®à¯

à®…à®¤à®¿à®• à®šà®¤à®µà¯€à®¤à®®à¯ à®Žà®©à¯à®±à®¾à®²à¯ à®šà®¿à®±à®¨à¯à®¤ à®ªà¯Šà®°à¯à®¤à¯à®¤à®®à¯! à®šà®¿à®±à®¨à¯à®¤ à®µà®¾à®¯à¯à®ªà¯à®ªà¯à®•à®³à¯à®•à¯à®•à¯ 70%+ à®ªà¯Šà®°à¯à®¤à¯à®¤à®™à¯à®•à®³à¯ˆ à®‡à®²à®•à¯à®•à®¾à®• à®µà¯ˆà®•à¯à®•à®µà¯à®®à¯.`,
      }
      return responses[language] || responses.en
    }

    // Skill improvement questions
    if (lowerMessage.includes("skill") || lowerMessage.includes("improve") || lowerMessage.includes("learn")) {
      const responses = {
        en: `Here are ways to improve your skills:

ðŸ“š Online Learning Platforms:
â€¢ Coursera - Professional certificates
â€¢ edX - University courses
â€¢ Udemy - Practical skills
â€¢ Khan Academy - Fundamentals

ðŸ› ï¸ Technical Skills:
â€¢ Programming: FreeCodeCamp, Codecademy
â€¢ Design: Adobe Creative Suite tutorials
â€¢ Data Analysis: Kaggle Learn
â€¢ Digital Marketing: Google Digital Garage

ðŸ’¼ Soft Skills:
â€¢ Communication: Toastmasters
â€¢ Leadership: LinkedIn Learning
â€¢ Project Management: PMI resources

Focus on skills that appear frequently in your target internships!`,
        hi: `à¤…à¤ªà¤¨à¥‡ à¤•à¥Œà¤¶à¤² à¤¸à¥à¤§à¤¾à¤°à¤¨à¥‡ à¤•à¥‡ à¤¤à¤°à¥€à¤•à¥‡:

ðŸ“š à¤‘à¤¨à¤²à¤¾à¤‡à¤¨ à¤²à¤°à¥à¤¨à¤¿à¤‚à¤— à¤ªà¥à¤²à¥‡à¤Ÿà¤«à¥‰à¤°à¥à¤®:
â€¢ Coursera - à¤µà¥à¤¯à¤¾à¤µà¤¸à¤¾à¤¯à¤¿à¤• à¤ªà¥à¤°à¤®à¤¾à¤£à¤ªà¤¤à¥à¤°
â€¢ edX - à¤µà¤¿à¤¶à¥à¤µà¤µà¤¿à¤¦à¥à¤¯à¤¾à¤²à¤¯ à¤ªà¤¾à¤ à¥à¤¯à¤•à¥à¤°à¤®
â€¢ Udemy - à¤µà¥à¤¯à¤¾à¤µà¤¹à¤¾à¤°à¤¿à¤• à¤•à¥Œà¤¶à¤²
â€¢ Khan Academy - à¤¬à¥à¤¨à¤¿à¤¯à¤¾à¤¦à¥€ à¤¬à¤¾à¤¤à¥‡à¤‚

ðŸ› ï¸ à¤¤à¤•à¤¨à¥€à¤•à¥€ à¤•à¥Œà¤¶à¤²:
â€¢ à¤ªà¥à¤°à¥‹à¤—à¥à¤°à¤¾à¤®à¤¿à¤‚à¤—: FreeCodeCamp, Codecademy
â€¢ à¤¡à¤¿à¤œà¤¼à¤¾à¤‡à¤¨: Adobe Creative Suite à¤Ÿà¥à¤¯à¥‚à¤Ÿà¥‹à¤°à¤¿à¤¯à¤²
â€¢ à¤¡à¥‡à¤Ÿà¤¾ à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£: Kaggle Learn
â€¢ à¤¡à¤¿à¤œà¤¿à¤Ÿà¤² à¤®à¤¾à¤°à¥à¤•à¥‡à¤Ÿà¤¿à¤‚à¤—: Google Digital Garage

ðŸ’¼ à¤¸à¥‰à¤«à¥à¤Ÿ à¤¸à¥à¤•à¤¿à¤²à¥à¤¸:
â€¢ à¤¸à¤‚à¤šà¤¾à¤°: Toastmasters
â€¢ à¤¨à¥‡à¤¤à¥ƒà¤¤à¥à¤µ: LinkedIn Learning
â€¢ à¤ªà¥à¤°à¥‹à¤œà¥‡à¤•à¥à¤Ÿ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨: PMI à¤¸à¤‚à¤¸à¤¾à¤§à¤¨`,
        kn: `à²¨à²¿à²®à³à²® à²•à³Œà²¶à²²à³à²¯à²—à²³à²¨à³à²¨à³ à²¸à³à²§à²¾à²°à²¿à²¸à³à²µ à²®à²¾à²°à³à²—à²—à²³à³:

ðŸ“š à²†à²¨à³â€Œà²²à³ˆà²¨à³ à²•à²²à²¿à²•à³† à²µà³‡à²¦à²¿à²•à³†à²—à²³à³:
â€¢ Coursera - à²µà³ƒà²¤à³à²¤à²¿à²ªà²° à²ªà³à²°à²®à²¾à²£à²ªà²¤à³à²°à²—à²³à³
â€¢ edX - à²µà²¿à²¶à³à²µà²µà²¿à²¦à³à²¯à²¾à²²à²¯ à²•à³‹à²°à³à²¸à³â€Œà²—à²³à³
â€¢ Udemy - à²ªà³à²°à²¾à²¯à³‹à²—à²¿à²• à²•à³Œà²¶à²²à³à²¯à²—à²³à³
â€¢ Khan Academy - à²®à³‚à²²à²­à³‚à²¤ à²…à²‚à²¶à²—à²³à³

ðŸ› ï¸ à²¤à²¾à²‚à²¤à³à²°à²¿à²• à²•à³Œà²¶à²²à³à²¯à²—à²³à³:
â€¢ à²ªà³à²°à³‹à²—à³à²°à²¾à²®à²¿à²‚à²—à³: FreeCodeCamp, Codecademy
â€¢ à²¡à²¿à²¸à³ˆà²¨à³: Adobe Creative Suite à²Ÿà³à²¯à³à²Ÿà³‹à²°à²¿à²¯à²²à³â€Œà²—à²³à³
â€¢ à²¡à³‡à²Ÿà²¾ à²µà²¿à²¶à³à²²à³‡à²·à²£à³†: Kaggle Learn
â€¢ à²¡à²¿à²œà²¿à²Ÿà²²à³ à²®à²¾à²°à³à²•à³†à²Ÿà²¿à²‚à²—à³: Google Digital Garage`,
        ta: `à®‰à®™à¯à®•à®³à¯ à®¤à®¿à®±à®©à¯à®•à®³à¯ˆ à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®®à¯ à®µà®´à®¿à®•à®³à¯:

ðŸ“š à®†à®©à¯à®²à¯ˆà®©à¯ à®•à®±à¯à®±à®²à¯ à®¤à®³à®™à¯à®•à®³à¯:
â€¢ Coursera - à®¤à¯Šà®´à®¿à®²à¯à®®à¯à®±à¯ˆ à®šà®¾à®©à¯à®±à®¿à®¤à®´à¯à®•à®³à¯
â€¢ edX - à®ªà®²à¯à®•à®²à¯ˆà®•à¯à®•à®´à®• à®ªà®Ÿà®¿à®ªà¯à®ªà¯à®•à®³à¯
â€¢ Udemy - à®¨à®Ÿà¯ˆà®®à¯à®±à¯ˆ à®¤à®¿à®±à®©à¯à®•à®³à¯
â€¢ Khan Academy - à®…à®Ÿà®¿à®ªà¯à®ªà®Ÿà¯ˆà®•à®³à¯

ðŸ› ï¸ à®¤à¯Šà®´à®¿à®²à¯à®¨à¯à®Ÿà¯à®ª à®¤à®¿à®±à®©à¯à®•à®³à¯:
â€¢ à®¨à®¿à®°à®²à®¾à®•à¯à®•à®®à¯: FreeCodeCamp, Codecademy
â€¢ à®µà®Ÿà®¿à®µà®®à¯ˆà®ªà¯à®ªà¯: Adobe Creative Suite à®ªà®¯à®¿à®±à¯à®šà®¿à®•à®³à¯
â€¢ à®¤à®°à®µà¯ à®ªà®•à¯à®ªà¯à®ªà®¾à®¯à¯à®µà¯: Kaggle Learn
â€¢ à®Ÿà®¿à®œà®¿à®Ÿà¯à®Ÿà®²à¯ à®®à®¾à®°à¯à®•à¯à®•à¯†à®Ÿà¯à®Ÿà®¿à®™à¯: Google Digital Garage`,
      }
      return responses[language] || responses.en
    }

    // PM Internship Scheme questions
    if (lowerMessage.includes("pm internship") || lowerMessage.includes("scheme") || lowerMessage.includes("program")) {
      const responses = {
        en: `About the PM Internship Scheme:

ðŸŽ¯ Objective: Provide practical work experience to students and recent graduates

ðŸ“‹ Eligibility:
â€¢ Students in final year of graduation/post-graduation
â€¢ Recent graduates (within 2 years)
â€¢ Age limit: 21-24 years

ðŸ’° Benefits:
â€¢ Monthly stipend of â‚¹5,000
â€¢ Certificate of completion
â€¢ Real work experience
â€¢ Networking opportunities

â° Duration: 6-12 months depending on the internship

ðŸ“ Sectors: Technology, Healthcare, Finance, Education, Government, and more

Apply through this portal to get matched with suitable opportunities!`,
        hi: `PM à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤¯à¥‹à¤œà¤¨à¤¾ à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚:

ðŸŽ¯ à¤‰à¤¦à¥à¤¦à¥‡à¤¶à¥à¤¯: à¤›à¤¾à¤¤à¥à¤°à¥‹à¤‚ à¤”à¤° à¤¹à¤¾à¤² à¤•à¥‡ à¤¸à¥à¤¨à¤¾à¤¤à¤•à¥‹à¤‚ à¤•à¥‹ à¤µà¥à¤¯à¤¾à¤µà¤¹à¤¾à¤°à¤¿à¤• à¤•à¤¾à¤°à¥à¤¯ à¤…à¤¨à¥à¤­à¤µ à¤ªà¥à¤°à¤¦à¤¾à¤¨ à¤•à¤°à¤¨à¤¾

ðŸ“‹ à¤ªà¤¾à¤¤à¥à¤°à¤¤à¤¾:
â€¢ à¤¸à¥à¤¨à¤¾à¤¤à¤•/à¤¸à¥à¤¨à¤¾à¤¤à¤•à¥‹à¤¤à¥à¤¤à¤° à¤•à¥‡ à¤…à¤‚à¤¤à¤¿à¤® à¤µà¤°à¥à¤· à¤•à¥‡ à¤›à¤¾à¤¤à¥à¤°
â€¢ à¤¹à¤¾à¤² à¤•à¥‡ à¤¸à¥à¤¨à¤¾à¤¤à¤• (2 à¤µà¤°à¥à¤· à¤•à¥‡ à¤­à¥€à¤¤à¤°)
â€¢ à¤†à¤¯à¥ à¤¸à¥€à¤®à¤¾: 21-24 à¤µà¤°à¥à¤·

ðŸ’° à¤²à¤¾à¤­:
â€¢ â‚¹5,000 à¤®à¤¾à¤¸à¤¿à¤• à¤µà¤œà¥€à¤«à¤¾
â€¢ à¤ªà¥‚à¤°à¥à¤£à¤¤à¤¾ à¤ªà¥à¤°à¤®à¤¾à¤£à¤ªà¤¤à¥à¤°
â€¢ à¤µà¤¾à¤¸à¥à¤¤à¤µà¤¿à¤• à¤•à¤¾à¤°à¥à¤¯ à¤…à¤¨à¥à¤­à¤µ
â€¢ à¤¨à¥‡à¤Ÿà¤µà¤°à¥à¤•à¤¿à¤‚à¤— à¤•à¥‡ à¤…à¤µà¤¸à¤°

â° à¤…à¤µà¤§à¤¿: à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤•à¥‡ à¤†à¤§à¤¾à¤° à¤ªà¤° 6-12 à¤®à¤¹à¥€à¤¨à¥‡

ðŸ“ à¤•à¥à¤·à¥‡à¤¤à¥à¤°: à¤ªà¥à¤°à¥Œà¤¦à¥à¤¯à¥‹à¤—à¤¿à¤•à¥€, à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤¸à¥‡à¤µà¤¾, à¤µà¤¿à¤¤à¥à¤¤, à¤¶à¤¿à¤•à¥à¤·à¤¾, à¤¸à¤°à¤•à¤¾à¤°, à¤”à¤° à¤…à¤§à¤¿à¤•`,
        kn: `PM à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²¯à³‹à²œà²¨à³†à²¯ à²¬à²—à³à²—à³†:

ðŸŽ¯ à²‰à²¦à³à²¦à³‡à²¶: à²µà²¿à²¦à³à²¯à²¾à²°à³à²¥à²¿à²—à²³à³ à²®à²¤à³à²¤à³ à²‡à²¤à³à²¤à³€à²šà²¿à²¨ à²ªà²¦à²µà³€à²§à²°à²°à²¿à²—à³† à²ªà³à²°à²¾à²¯à³‹à²—à²¿à²• à²•à³†à²²à²¸à²¦ à²…à²¨à³à²­à²µà²µà²¨à³à²¨à³ à²’à²¦à²—à²¿à²¸à³à²µà³à²¦à³

ðŸ“‹ à²…à²°à³à²¹à²¤à³†:
â€¢ à²ªà²¦à²µà²¿/à²¸à³à²¨à²¾à²¤à²•à³‹à²¤à³à²¤à²° à²…à²‚à²¤à²¿à²® à²µà²°à³à²·à²¦ à²µà²¿à²¦à³à²¯à²¾à²°à³à²¥à²¿à²—à²³à³
â€¢ à²‡à²¤à³à²¤à³€à²šà²¿à²¨ à²ªà²¦à²µà³€à²§à²°à²°à³ (2 à²µà²°à³à²·à²—à²³à³Šà²³à²—à³†)
â€¢ à²µà²¯à²¸à³à²¸à²¿à²¨ à²®à²¿à²¤à²¿: 21-24 à²µà²°à³à²·à²—à²³à³

ðŸ’° à²ªà³à²°à²¯à³‹à²œà²¨à²—à²³à³:
â€¢ â‚¹5,000 à²®à²¾à²¸à²¿à²• à²¸à³à²Ÿà³ˆà²ªà³†à²‚à²¡à³
â€¢ à²ªà³‚à²°à³à²£à²—à³Šà²³à²¿à²¸à³à²µà²¿à²•à³†à²¯ à²ªà³à²°à²®à²¾à²£à²ªà²¤à³à²°
â€¢ à²¨à²¿à²œà²µà²¾à²¦ à²•à³†à²²à²¸à²¦ à²…à²¨à³à²­à²µ
â€¢ à²¨à³†à²Ÿà³â€Œà²µà²°à³à²•à²¿à²‚à²—à³ à²…à²µà²•à²¾à²¶à²—à²³à³`,
        ta: `PM à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®¤à®¿à®Ÿà¯à®Ÿà®®à¯ à®ªà®±à¯à®±à®¿:

ðŸŽ¯ à®¨à¯‹à®•à¯à®•à®®à¯: à®®à®¾à®£à®µà®°à¯à®•à®³à¯ à®®à®±à¯à®±à¯à®®à¯ à®šà®®à¯€à®ªà®¤à¯à®¤à®¿à®¯ à®ªà®Ÿà¯à®Ÿà®¤à®¾à®°à®¿à®•à®³à¯à®•à¯à®•à¯ à®¨à®Ÿà¯ˆà®®à¯à®±à¯ˆ à®ªà®£à®¿ à®…à®©à¯à®ªà®µà®®à¯ à®µà®´à®™à¯à®•à¯à®¤à®²à¯

ðŸ“‹ à®¤à®•à¯à®¤à®¿:
â€¢ à®ªà®Ÿà¯à®Ÿà®®à¯/à®®à¯à®¤à¯à®•à®²à¯ˆ à®‡à®±à¯à®¤à®¿ à®†à®£à¯à®Ÿà¯ à®®à®¾à®£à®µà®°à¯à®•à®³à¯
â€¢ à®šà®®à¯€à®ªà®¤à¯à®¤à®¿à®¯ à®ªà®Ÿà¯à®Ÿà®¤à®¾à®°à®¿à®•à®³à¯ (2 à®†à®£à¯à®Ÿà¯à®•à®³à¯à®•à¯à®•à¯à®³à¯)
â€¢ à®µà®¯à®¤à¯ à®µà®°à®®à¯à®ªà¯: 21-24 à®†à®£à¯à®Ÿà¯à®•à®³à¯

ðŸ’° à®¨à®©à¯à®®à¯ˆà®•à®³à¯:
â€¢ â‚¹5,000 à®®à®¾à®¤à®¾à®¨à¯à®¤à®¿à®° à®‰à®¤à®µà®¿à®¤à¯à®¤à¯Šà®•à¯ˆ
â€¢ à®¨à®¿à®±à¯ˆà®µà¯ à®šà®¾à®©à¯à®±à®¿à®¤à®´à¯
â€¢ à®‰à®£à¯à®®à¯ˆà®¯à®¾à®© à®ªà®£à®¿ à®…à®©à¯à®ªà®µà®®à¯
â€¢ à®¨à¯†à®Ÿà¯à®µà¯Šà®°à¯à®•à¯à®•à®¿à®™à¯ à®µà®¾à®¯à¯à®ªà¯à®ªà¯à®•à®³à¯`,
      }
      return responses[language] || responses.en
    }

    // Default response
    const defaultResponses = {
      en: `I can help you with:
â€¢ Resume upload and optimization tips
â€¢ Understanding match percentages
â€¢ Skill improvement recommendations
â€¢ PM Internship Scheme information
â€¢ General guidance on internship applications

Please ask me about any of these topics!`,
      hi: `à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤‡à¤¨à¤®à¥‡à¤‚ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¤¾ à¤¹à¥‚à¤‚:
â€¢ à¤°à¤¿à¤œà¥à¤¯à¥‚à¤®à¥‡ à¤…à¤ªà¤²à¥‹à¤¡ à¤”à¤° à¤‘à¤ªà¥à¤Ÿà¤¿à¤®à¤¾à¤‡à¤œà¤¼à¥‡à¤¶à¤¨ à¤Ÿà¤¿à¤ªà¥à¤¸
â€¢ à¤®à¥ˆà¤š à¤ªà¥à¤°à¤¤à¤¿à¤¶à¤¤ à¤¸à¤®à¤à¤¨à¤¾
â€¢ à¤•à¥Œà¤¶à¤² à¤¸à¥à¤§à¤¾à¤° à¤•à¥€ à¤¸à¤¿à¤«à¤¾à¤°à¤¿à¤¶à¥‡à¤‚
â€¢ PM à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤¯à¥‹à¤œà¤¨à¤¾ à¤•à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€
â€¢ à¤‡à¤‚à¤Ÿà¤°à¥à¤¨à¤¶à¤¿à¤ª à¤†à¤µà¥‡à¤¦à¤¨ à¤ªà¤° à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤®à¤¾à¤°à¥à¤—à¤¦à¤°à¥à¤¶à¤¨

à¤•à¥ƒà¤ªà¤¯à¤¾ à¤®à¥à¤à¤¸à¥‡ à¤‡à¤¨à¤®à¥‡à¤‚ à¤¸à¥‡ à¤•à¤¿à¤¸à¥€ à¤­à¥€ à¤µà¤¿à¤·à¤¯ à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚ à¤ªà¥‚à¤›à¥‡à¤‚!`,
      kn: `à²¨à²¾à²¨à³ à²¨à²¿à²®à²—à³† à²‡à²µà³à²—à²³à²²à³à²²à²¿ à²¸à²¹à²¾à²¯ à²®à²¾à²¡à²¬à²¹à³à²¦à³:
â€¢ à²°à³†à²¸à³à²¯à³‚à²®à³ à²…à²ªà³â€Œà²²à³‹à²¡à³ à²®à²¤à³à²¤à³ à²†à²ªà³à²Ÿà²¿à²®à³ˆà²¸à³‡à²¶à²¨à³ à²¸à²²à²¹à³†à²—à²³à³
â€¢ à²®à³à²¯à²¾à²šà³ à²¶à³‡à²•à²¡à²¾à²µà²¾à²°à³ à²…à²°à³à²¥à²®à²¾à²¡à²¿à²•à³Šà²³à³à²³à³à²µà³à²¦à³
â€¢ à²•à³Œà²¶à²²à³à²¯ à²¸à³à²§à²¾à²°à²£à³† à²¶à²¿à²«à²¾à²°à²¸à³à²—à²³à³
â€¢ PM à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²¯à³‹à²œà²¨à³†à²¯ à²®à²¾à²¹à²¿à²¤à²¿
â€¢ à²‡à²‚à²Ÿà²°à³à²¨à³â€Œà²¶à²¿à²ªà³ à²…à²°à³à²œà²¿à²—à²³ à²¬à²—à³à²—à³† à²¸à²¾à²®à²¾à²¨à³à²¯ à²®à²¾à²°à³à²—à²¦à²°à³à²¶à²¨

à²¦à²¯à²µà²¿à²Ÿà³à²Ÿà³ à²ˆ à²µà²¿à²·à²¯à²—à²³à²²à³à²²à²¿ à²¯à²¾à²µà³à²¦à²¾à²¦à²°à³‚ à²¬à²—à³à²—à³† à²¨à²¨à³à²¨à²¨à³à²¨à³ à²•à³‡à²³à²¿!`,
      ta: `à®¨à®¾à®©à¯ à®‰à®™à¯à®•à®³à¯à®•à¯à®•à¯ à®‡à®µà®±à¯à®±à®¿à®²à¯ à®‰à®¤à®µ à®®à¯à®Ÿà®¿à®¯à¯à®®à¯:
â€¢ à®°à¯†à®¸à¯à®¯à¯‚à®®à¯ à®ªà®¤à®¿à®µà¯‡à®±à¯à®±à®®à¯ à®®à®±à¯à®±à¯à®®à¯ à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à®²à¯ à®•à¯à®±à®¿à®ªà¯à®ªà¯à®•à®³à¯
â€¢ à®ªà¯Šà®°à¯à®¤à¯à®¤ à®šà®¤à®µà¯€à®¤à®¤à¯à®¤à¯ˆ à®ªà¯à®°à®¿à®¨à¯à®¤à¯à®•à¯Šà®³à¯à®³à¯à®¤à®²à¯
â€¢ à®¤à®¿à®±à®©à¯ à®®à¯‡à®®à¯à®ªà®¾à®Ÿà¯à®Ÿà¯ à®ªà®°à®¿à®¨à¯à®¤à¯à®°à¯ˆà®•à®³à¯
â€¢ PM à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®¤à®¿à®Ÿà¯à®Ÿ à®¤à®•à®µà®²à¯
â€¢ à®‡à®©à¯à®Ÿà®°à¯à®©à¯à®·à®¿à®ªà¯ à®µà®¿à®£à¯à®£à®ªà¯à®ªà®™à¯à®•à®³à¯ à®ªà®±à¯à®±à®¿à®¯ à®ªà¯Šà®¤à¯à®µà®¾à®© à®µà®´à®¿à®•à®¾à®Ÿà¯à®Ÿà¯à®¤à®²à¯

à®¤à®¯à®µà¯à®šà¯†à®¯à¯à®¤à¯ à®‡à®¨à¯à®¤ à®¤à®²à¯ˆà®ªà¯à®ªà¯à®•à®³à®¿à®²à¯ à®à®¤à¯‡à®©à¯à®®à¯ à®’à®©à¯à®±à¯ˆà®ªà¯ à®ªà®±à¯à®±à®¿ à®Žà®©à¯à®©à®¿à®Ÿà®®à¯ à®•à¯‡à®³à¯à®™à¯à®•à®³à¯!`,
    }
    return defaultResponses[language] || defaultResponses.en
  }

  const handleSendMessage = async () => {
    if (!inputValue.trim()) return

    const userMessage: Message = {
      id: Date.now().toString(),
      type: "user",
      content: inputValue,
      timestamp: new Date(),
    }

    setMessages((prev) => [...prev, userMessage])
    setInputValue("")
    setIsTyping(true)

    // Simulate typing delay
    setTimeout(
      () => {
        const botResponse = getBotResponse(inputValue)
        const botMessage: Message = {
          id: (Date.now() + 1).toString(),
          type: "bot",
          content: botResponse,
          timestamp: new Date(),
        }
        setMessages((prev) => [...prev, botMessage])
        setIsTyping(false)
      },
      1000 + Math.random() * 1000,
    ) // 1-2 second delay
  }

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault()
      handleSendMessage()
    }
  }

  return (
    <>
      {/* Chatbot Toggle Button */}
      <Button
        onClick={() => setIsOpen(true)}
        className="fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg z-50"
        size="icon"
      >
        <MessageCircle className="h-6 w-6" />
        <span className="sr-only">Open AI Assistant</span>
      </Button>

      {/* Chatbot Window */}
      {isOpen && (
        <Card className="fixed bottom-6 right-6 w-96 h-[500px] shadow-xl z-50 flex flex-col">
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-lg flex items-center gap-2">
              <Bot className="h-5 w-5 text-primary" />
              {t("common.assistant") || "AI Assistant"}
            </CardTitle>
            <Button variant="ghost" size="icon" onClick={() => setIsOpen(false)} className="h-6 w-6">
              <X className="h-4 w-4" />
            </Button>
          </CardHeader>

          <CardContent className="flex-1 flex flex-col p-0">
            {/* Messages Area */}
            <ScrollArea className="flex-1 p-4">
              <div className="space-y-4">
                {messages.map((message) => (
                  <div
                    key={message.id}
                    className={`flex gap-2 ${message.type === "user" ? "justify-end" : "justify-start"}`}
                  >
                    {message.type === "bot" && (
                      <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                        <Bot className="h-4 w-4 text-primary" />
                      </div>
                    )}
                    <div
                      className={`max-w-[80%] rounded-lg px-3 py-2 text-sm whitespace-pre-wrap ${
                        message.type === "user" ? "bg-primary text-primary-foreground ml-auto" : "bg-muted"
                      }`}
                    >
                      {message.content}
                    </div>
                    {message.type === "user" && (
                      <div className="w-8 h-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0">
                        <User className="h-4 w-4 text-primary-foreground" />
                      </div>
                    )}
                  </div>
                ))}

                {isTyping && (
                  <div className="flex gap-2 justify-start">
                    <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                      <Bot className="h-4 w-4 text-primary" />
                    </div>
                    <div className="bg-muted rounded-lg px-3 py-2 text-sm">
                      <div className="flex gap-1">
                        <div className="w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"></div>
                        <div
                          className="w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"
                          style={{ animationDelay: "0.1s" }}
                        ></div>
                        <div
                          className="w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"
                          style={{ animationDelay: "0.2s" }}
                        ></div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
              <div ref={messagesEndRef} />
            </ScrollArea>

            {/* Input Area */}
            <div className="border-t p-4">
              <div className="flex gap-2">
                <Input
                  value={inputValue}
                  onChange={(e) => setInputValue(e.target.value)}
                  onKeyPress={handleKeyPress}
                  placeholder={t("chatbot.placeholder") || "Ask me anything..."}
                  className="flex-1"
                  disabled={isTyping}
                />
                <Button onClick={handleSendMessage} disabled={!inputValue.trim() || isTyping} size="icon">
                  <Send className="h-4 w-4" />
                </Button>
              </div>
            </div>
          </CardContent>
        </Card>
      )}
    </>
  )
}
