"use client"

import type React from "react"

import { useState, useRef, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Input } from "@/components/ui/input"
import { ScrollArea } from "@/components/ui/scroll-area"
import { MessageCircle, X, Send, Bot, User } from "lucide-react"
import { useLanguage } from "./language-provider"

interface Message {
  id: string
  type: "user" | "bot"
  content: string
  timestamp: Date
}

interface ChatbotProps {
  userProfile?: any
}

export function AIChatbot({ userProfile }: ChatbotProps) {
  const [isOpen, setIsOpen] = useState(false)
  const [messages, setMessages] = useState<Message[]>([])
  const [inputValue, setInputValue] = useState("")
  const [isTyping, setIsTyping] = useState(false)
  const messagesEndRef = useRef<HTMLDivElement>(null)
  const { t, language } = useLanguage()

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" })
  }

  useEffect(() => {
    scrollToBottom()
  }, [messages])

  useEffect(() => {
    if (isOpen && messages.length === 0) {
      // Send welcome message when chatbot opens
      const welcomeMessage = getWelcomeMessage()
      setMessages([
        {
          id: Date.now().toString(),
          type: "bot",
          content: welcomeMessage,
          timestamp: new Date(),
        },
      ])
    }
  }, [isOpen, language])

  const getWelcomeMessage = () => {
    const greetings = {
      en: `Hello! I'm your PM Internship assistant. I can help you with:
тАв How to upload and optimize your resume
тАв Understanding match percentages
тАв Improving your skills for better matches
тАв General questions about the PM Internship Scheme
тАв Skill improvement recommendations

What would you like to know?`,
      hi: `рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрдХрд╛ PM рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рд╕рд╣рд╛рдпрдХ рд╣реВрдВред рдореИрдВ рдЖрдкрдХреА рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ:
тАв рд░рд┐рдЬреНрдпреВрдореЗ рдЕрдкрд▓реЛрдб рдФрд░ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдореЗрдВ
тАв рдореИрдЪ рдкреНрд░рддрд┐рд╢рдд рд╕рдордЭрдиреЗ рдореЗрдВ
тАв рдмреЗрд╣рддрд░ рдореИрдЪ рдХреЗ рд▓рд┐рдП рдХреМрд╢рд▓ рд╕реБрдзрд╛рд░рдиреЗ рдореЗрдВ
тАв PM рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдпреЛрдЬрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рд╢реНрди
тАв рдХреМрд╢рд▓ рд╕реБрдзрд╛рд░ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ

рдЖрдк рдХреНрдпрд╛ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?`,
      kn: `р▓ир▓ор▓╕р│Нр▓Хр▓╛р▓░! р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор│Нр▓о PM р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓╕р▓╣р▓╛р▓пр▓Х. р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б:
тАв р▓░р│Жр▓╕р│Нр▓пр│Вр▓ор│Н р▓Ер▓кр│НтАМр▓▓р│Лр▓бр│Н р▓ор▓др│Нр▓др│Б р▓Жр▓кр│Нр▓Яр▓┐р▓ор│Ир▓╕р│Н р▓ор▓╛р▓бр│Бр▓╡р│Бр▓жр│Б
тАв р▓ор│Нр▓пр▓╛р▓Ър│Н р▓╢р│Зр▓Хр▓бр▓╛р▓╡р▓╛р▓░р│Б р▓Ер▓░р│Нр▓ер▓ор▓╛р▓бр▓┐р▓Хр│Кр▓│р│Нр▓│р│Бр▓╡р│Бр▓жр│Б
тАв р▓Йр▓др│Нр▓др▓о р▓ор│Нр▓пр▓╛р▓Ър│НтАМр▓Чр▓│р▓┐р▓Чр▓╛р▓Чр▓┐ р▓Хр│Мр▓╢р▓▓р│Нр▓пр▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р│Бр▓зр▓╛р▓░р▓┐р▓╕р│Бр▓╡р│Бр▓жр│Б
тАв PM р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓пр│Лр▓Ьр▓ир│Жр▓п р▓мр▓Чр│Нр▓Чр│Ж р▓╕р▓╛р▓ор▓╛р▓ир│Нр▓п р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓Чр▓│р│Б
тАв р▓Хр│Мр▓╢р▓▓р│Нр▓п р▓╕р│Бр▓зр▓╛р▓░р▓гр│Ж р▓╢р▓┐р▓лр▓╛р▓░р▓╕р│Бр▓Чр▓│р│Б

р▓ир│Ар▓╡р│Б р▓Пр▓ир│Б р▓др▓┐р▓│р▓┐р▓пр▓▓р│Б р▓мр▓пр▓╕р│Бр▓др│Нр▓др│Ар▓░р▓┐?`,
      ta: `ро╡рогроХрпНроХроорпН! роиро╛ройрпН роЙроЩрпНроХро│рпН PM роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН роЙродро╡ро┐ропро╛ро│ро░рпН. роиро╛ройрпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роЙродро╡ роорпБроЯро┐ропрпБроорпН:
тАв ро░рпЖро╕рпНропрпВроорпН рокродро┐ро╡рпЗро▒рпНро▒роорпН рооро▒рпНро▒рпБроорпН роорпЗроорпНрокроЯрпБродрпНродрпБродро▓рпН
тАв рокрпКро░рпБродрпНрод роЪродро╡рпАродродрпНродрпИ рокрпБро░ро┐роирпНродрпБроХрпКро│рпНро│рпБродро▓рпН
тАв роЪро┐ро▒роирпНрод рокрпКро░рпБродрпНродроЩрпНроХро│рпБроХрпНроХрпБ родро┐ро▒ройрпНроХро│рпИ роорпЗроорпНрокроЯрпБродрпНродрпБродро▓рпН
тАв PM роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН родро┐роЯрпНроЯроорпН рокро▒рпНро▒ро┐роп рокрпКродрпБро╡ро╛рой роХрпЗро│рпНро╡ро┐роХро│рпН
тАв родро┐ро▒ройрпН роорпЗроорпНрокро╛роЯрпНроЯрпБ рокро░ро┐роирпНродрпБро░рпИроХро│рпН

роирпАроЩрпНроХро│рпН роОройрпНрой родрпЖро░ро┐роирпНродрпБроХрпКро│рпНро│ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│рпН?`,
    }
    return greetings[language] || greetings.en
  }

  const getBotResponse = (userMessage: string): string => {
    const lowerMessage = userMessage.toLowerCase()

    // Resume-related questions
    if (lowerMessage.includes("resume") || lowerMessage.includes("cv") || lowerMessage.includes("upload")) {
      const responses = {
        en: `To upload your resume effectively:
1. Go to your Profile Setup page
2. Click "Choose File" in the Resume section
3. Select a PDF or DOC file (max 5MB)
4. Our system will automatically extract your skills
5. Review and add any missing skills manually

Tips for a better resume:
тАв Use clear section headers (Education, Experience, Skills)
тАв List specific technical skills
тАв Include relevant project experience
тАв Keep it concise (1-2 pages)`,
        hi: `рдЕрдкрдирд╛ рд░рд┐рдЬреНрдпреВрдореЗ рдкреНрд░рднрд╛рд╡реА рд░реВрдк рд╕реЗ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП:
1. рдЕрдкрдиреЗ рдкреНрд░реЛрдлрд╛рдЗрд▓ рд╕реЗрдЯрдЕрдк рдкреЗрдЬ рдкрд░ рдЬрд╛рдПрдВ
2. рд░рд┐рдЬреНрдпреВрдореЗ рд╕реЗрдХреНрд╢рди рдореЗрдВ "рдлрд╛рдЗрд▓ рдЪреБрдиреЗрдВ" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ
3. PDF рдпрд╛ DOC рдлрд╛рдЗрд▓ рдЪреБрдиреЗрдВ (рдЕрдзрд┐рдХрддрдо 5MB)
4. рд╣рдорд╛рд░рд╛ рд╕рд┐рд╕реНрдЯрдо рдЖрдкрдХреЗ рдХреМрд╢рд▓ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдирд┐рдХрд╛рд▓реЗрдЧрд╛
5. рд╕рдореАрдХреНрд╖рд╛ рдХрд░реЗрдВ рдФрд░ рдХреЛрдИ рднреА рдЧреБрдо рдХреМрд╢рд▓ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЬреЛрдбрд╝реЗрдВ

рдмреЗрд╣рддрд░ рд░рд┐рдЬреНрдпреВрдореЗ рдХреЗ рд▓рд┐рдП рдЯрд┐рдкреНрд╕:
тАв рд╕реНрдкрд╖реНрдЯ рд╕реЗрдХреНрд╢рди рд╣реЗрдбрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
тАв рд╡рд┐рд╢рд┐рд╖реНрдЯ рддрдХрдиреАрдХреА рдХреМрд╢рд▓ рд╕реВрдЪреАрдмрджреНрдз рдХрд░реЗрдВ
тАв рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЕрдиреБрднрд╡ рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВ`,
        kn: `р▓ир▓┐р▓ор│Нр▓о р▓░р│Жр▓╕р│Нр▓пр│Вр▓ор│Н р▓Ер▓ир│Нр▓ир│Б р▓кр▓░р▓┐р▓гр▓╛р▓ор▓Хр▓╛р▓░р▓┐р▓пр▓╛р▓Чр▓┐ р▓Ер▓кр│НтАМр▓▓р│Лр▓бр│Н р▓ор▓╛р▓бр▓▓р│Б:
1. р▓ир▓┐р▓ор│Нр▓о р▓кр│Нр▓░р│Кр▓лр│Ир▓▓р│Н р▓╕р│Жр▓Яр▓кр│Н р▓кр│Бр▓Яр▓Хр│Нр▓Хр│Ж р▓╣р│Лр▓Чр▓┐
2. р▓░р│Жр▓╕р│Нр▓пр│Вр▓ор│Н р▓╡р▓┐р▓нр▓╛р▓Чр▓жр▓▓р│Нр▓▓р▓┐ "р▓лр│Ир▓▓р│Н р▓Жр▓пр│Нр▓Хр│Жр▓ор▓╛р▓бр▓┐" р▓Хр│Нр▓▓р▓┐р▓Хр│Н р▓ор▓╛р▓бр▓┐
3. PDF р▓Ер▓ер▓╡р▓╛ DOC р▓лр│Ир▓▓р│Н р▓Жр▓пр│Нр▓Хр│Жр▓ор▓╛р▓бр▓┐ (р▓Чр▓░р▓┐р▓╖р│Нр▓а 5MB)
4. р▓ир▓ор│Нр▓о р▓╕р▓┐р▓╕р│Нр▓Яр▓В р▓ир▓┐р▓ор│Нр▓о р▓Хр│Мр▓╢р▓▓р│Нр▓пр▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р│Нр▓╡р▓пр▓Вр▓Ър▓╛р▓▓р▓┐р▓др▓╡р▓╛р▓Чр▓┐ р▓╣р│Кр▓░р▓др│Жр▓Чр│Жр▓пр│Бр▓др│Нр▓др▓жр│Ж
5. р▓кр▓░р▓┐р▓╢р│Ар▓▓р▓┐р▓╕р▓┐ р▓ор▓др│Нр▓др│Б р▓Хр▓╛р▓гр│Жр▓пр▓╛р▓ж р▓Хр│Мр▓╢р▓▓р│Нр▓пр▓Чр▓│р▓ир│Нр▓ир│Б р▓╣р▓╕р│Нр▓др▓Ър▓╛р▓▓р▓┐р▓др▓╡р▓╛р▓Чр▓┐ р▓╕р│Зр▓░р▓┐р▓╕р▓┐`,
        ta: `роЙроЩрпНроХро│рпН ро░рпЖро╕рпНропрпВроорпИ родро┐ро▒роорпНрокроЯ рокродро┐ро╡рпЗро▒рпНро▒:
1. роЙроЩрпНроХро│рпН роЪрпБропро╡ро┐ро╡ро░ роЕроорпИрокрпНрокрпБ рокроХрпНроХродрпНродро┐ро▒рпНроХрпБ роЪрпЖро▓рпНро▓ро╡рпБроорпН
2. ро░рпЖро╕рпНропрпВроорпН рокро┐ро░ро┐ро╡ро┐ро▓рпН "роХрпЛрокрпНрокрпБ родрпЗро░рпНро╡рпБ" роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН
3. PDF роЕро▓рпНро▓родрпБ DOC роХрпЛрокрпНрокрпБ родрпЗро░рпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН (роЕродро┐роХрокроЯрпНроЪроорпН 5MB)
4. роОроЩрпНроХро│рпН роЕроорпИрокрпНрокрпБ роЙроЩрпНроХро│рпН родро┐ро▒ройрпНроХро│рпИ родро╛ройро╛роХро╡рпЗ рокро┐ро░ро┐родрпНродрпЖроЯрпБроХрпНроХрпБроорпН
5. роородро┐рокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНродрпБ ро╡ро┐роЯрпБрокроЯрпНроЯ родро┐ро▒ройрпНроХро│рпИ роХрпИроорпБро▒рпИропро╛роХ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН`,
      }
      return responses[language] || responses.en
    }

    // Match percentage questions
    if (lowerMessage.includes("match") || lowerMessage.includes("percentage") || lowerMessage.includes("%")) {
      const responses = {
        en: `Match percentage is calculated based on:

ЁЯОп Skills Match (40%): How many of your skills match the internship requirements
ЁЯУЪ Education Fit (20%): Your education level vs. internship requirements  
ЁЯПв Sector Match (20%): Your sector interests vs. internship sector
ЁЯУН Location (20%): Your location preference vs. internship location

Higher percentages mean better fit! Aim for 70%+ matches for the best opportunities.`,
        hi: `рдореИрдЪ рдкреНрд░рддрд┐рд╢рдд рдХреА рдЧрдгрдирд╛ рдЗрд╕ рдЖрдзрд╛рд░ рдкрд░ рдХреА рдЬрд╛рддреА рд╣реИ:

ЁЯОп рдХреМрд╢рд▓ рдореИрдЪ (40%): рдЖрдкрдХреЗ рдХрд┐рддрдиреЗ рдХреМрд╢рд▓ рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреЗ рд╣реИрдВ
ЁЯУЪ рд╢рд┐рдХреНрд╖рд╛ рдлрд┐рдЯ (20%): рдЖрдкрдХрд╛ рд╢рд┐рдХреНрд╖рд╛ рд╕реНрддрд░ рдмрдирд╛рдо рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ
ЁЯПв рд╕реЗрдХреНрдЯрд░ рдореИрдЪ (20%): рдЖрдкрдХреЗ рд╕реЗрдХреНрдЯрд░ рд╣рд┐рдд рдмрдирд╛рдо рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рд╕реЗрдХреНрдЯрд░
ЁЯУН рд╕реНрдерд╛рди (20%): рдЖрдкрдХреА рд╕реНрдерд╛рди рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рдмрдирд╛рдо рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рд╕реНрдерд╛рди

рдЙрдЪреНрдЪ рдкреНрд░рддрд┐рд╢рдд рдХрд╛ рдорддрд▓рдм рдмреЗрд╣рддрд░ рдлрд┐рдЯ рд╣реИ! рд╕рд░реНрд╡реЛрддреНрддрдо рдЕрд╡рд╕рд░реЛрдВ рдХреЗ рд▓рд┐рдП 70%+ рдореИрдЪ рдХрд╛ рд▓рдХреНрд╖реНрдп рд░рдЦреЗрдВред`,
        kn: `р▓ор│Нр▓пр▓╛р▓Ър│Н р▓╢р│Зр▓Хр▓бр▓╛р▓╡р▓╛р▓░р│Б р▓Зр▓жр▓░ р▓Жр▓зр▓╛р▓░р▓ж р▓ор│Зр▓▓р│Ж р▓▓р│Жр▓Хр│Нр▓Хр▓╣р▓╛р▓Хр▓▓р▓╛р▓Чр│Бр▓др│Нр▓др▓жр│Ж:

ЁЯОп р▓Хр│Мр▓╢р▓▓р│Нр▓п р▓ор│Нр▓пр▓╛р▓Ър│Н (40%): р▓ир▓┐р▓ор│Нр▓о р▓Ор▓╖р│Нр▓Яр│Б р▓Хр│Мр▓╢р▓▓р│Нр▓пр▓Чр▓│р│Б р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓Ер▓╡р▓╢р│Нр▓пр▓Хр▓др│Жр▓Чр▓│р▓┐р▓Чр│Ж р▓╣р│Кр▓Вр▓жр▓┐р▓Хр│Жр▓пр▓╛р▓Чр│Бр▓др│Нр▓др▓╡р│Ж
ЁЯУЪ р▓╢р▓┐р▓Хр│Нр▓╖р▓г р▓лр▓┐р▓Яр│Н (20%): р▓ир▓┐р▓ор│Нр▓о р▓╢р▓┐р▓Хр│Нр▓╖р▓г р▓ор▓Яр│Нр▓Я р▓╡р▓┐р▓░р│Бр▓жр│Нр▓з р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓Ер▓╡р▓╢р│Нр▓пр▓Хр▓др│Жр▓Чр▓│р│Б
ЁЯПв р▓╕р│Жр▓Хр│Нр▓Яр▓░р│Н р▓ор│Нр▓пр▓╛р▓Ър│Н (20%): р▓ир▓┐р▓ор│Нр▓о р▓╕р│Жр▓Хр│Нр▓Яр▓░р│Н р▓Жр▓╕р▓Хр│Нр▓др▓┐р▓Чр▓│р│Б р▓╡р▓┐р▓░р│Бр▓жр│Нр▓з р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓╕р│Жр▓Хр│Нр▓Яр▓░р│Н
ЁЯУН р▓╕р│Нр▓ер▓│ (20%): р▓ир▓┐р▓ор│Нр▓о р▓╕р│Нр▓ер▓│ р▓Жр▓жр│Нр▓пр▓др│Ж р▓╡р▓┐р▓░р│Бр▓жр│Нр▓з р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓╕р│Нр▓ер▓│

р▓╣р│Жр▓Ър│Нр▓Ър▓┐р▓и р▓╢р│Зр▓Хр▓бр▓╛р▓╡р▓╛р▓░р│Б р▓Ор▓Вр▓жр▓░р│Ж р▓Йр▓др│Нр▓др▓о р▓лр▓┐р▓Яр│Н! р▓Ер▓др│Нр▓пр│Бр▓др│Нр▓др▓о р▓Ер▓╡р▓Хр▓╛р▓╢р▓Чр▓│р▓┐р▓Чр▓╛р▓Чр▓┐ 70%+ р▓ор│Нр▓пр▓╛р▓Ър│НтАМр▓Чр▓│р▓ир│Нр▓ир│Б р▓Чр│Бр▓░р▓┐р▓пр▓╛р▓Чр▓┐р▓╕р▓┐ред`,
        ta: `рокрпКро░рпБродрпНрод роЪродро╡рпАродроорпН роЗродройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН роХрогроХрпНроХро┐роЯрокрпНрокроЯрпБроХро┐ро▒родрпБ:

ЁЯОп родро┐ро▒ройрпН рокрпКро░рпБродрпНродроорпН (40%): роЙроЩрпНроХро│рпН роОродрпНродройрпИ родро┐ро▒ройрпНроХро│рпН роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН родрпЗро╡рпИроХро│рпБроЯройрпН рокрпКро░рпБроирпНродрпБроХро┐ройрпНро▒рой
ЁЯУЪ роХро▓рпНро╡ро┐ рокрпКро░рпБродрпНродроорпН (20%): роЙроЩрпНроХро│рпН роХро▓рпНро╡ро┐ роиро┐ро▓рпИ vs роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН родрпЗро╡рпИроХро│рпН
ЁЯПв родрпБро▒рпИ рокрпКро░рпБродрпНродроорпН (20%): роЙроЩрпНроХро│рпН родрпБро▒рпИ роЖро░рпНро╡роЩрпНроХро│рпН vs роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН родрпБро▒рпИ
ЁЯУН роЗроЯроорпН (20%): роЙроЩрпНроХро│рпН роЗроЯ ро╡ро┐ро░рпБрокрпНрокроорпН vs роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН роЗроЯроорпН

роЕродро┐роХ роЪродро╡рпАродроорпН роОройрпНро▒ро╛ро▓рпН роЪро┐ро▒роирпНрод рокрпКро░рпБродрпНродроорпН! роЪро┐ро▒роирпНрод ро╡ро╛ропрпНрокрпНрокрпБроХро│рпБроХрпНроХрпБ 70%+ рокрпКро░рпБродрпНродроЩрпНроХро│рпИ роЗро▓роХрпНроХро╛роХ ро╡рпИроХрпНроХро╡рпБроорпН.`,
      }
      return responses[language] || responses.en
    }

    // Skill improvement questions
    if (lowerMessage.includes("skill") || lowerMessage.includes("improve") || lowerMessage.includes("learn")) {
      const responses = {
        en: `Here are ways to improve your skills:

ЁЯУЪ Online Learning Platforms:
тАв Coursera - Professional certificates
тАв edX - University courses
тАв Udemy - Practical skills
тАв Khan Academy - Fundamentals

ЁЯЫая╕П Technical Skills:
тАв Programming: FreeCodeCamp, Codecademy
тАв Design: Adobe Creative Suite tutorials
тАв Data Analysis: Kaggle Learn
тАв Digital Marketing: Google Digital Garage

ЁЯТ╝ Soft Skills:
тАв Communication: Toastmasters
тАв Leadership: LinkedIn Learning
тАв Project Management: PMI resources

Focus on skills that appear frequently in your target internships!`,
        hi: `рдЕрдкрдиреЗ рдХреМрд╢рд▓ рд╕реБрдзрд╛рд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ:

ЁЯУЪ рдСрдирд▓рд╛рдЗрди рд▓рд░реНрдирд┐рдВрдЧ рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо:
тАв Coursera - рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдкреНрд░рдорд╛рдгрдкрддреНрд░
тАв edX - рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдп рдкрд╛рдареНрдпрдХреНрд░рдо
тАв Udemy - рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХреМрд╢рд▓
тАв Khan Academy - рдмреБрдирд┐рдпрд╛рджреА рдмрд╛рддреЗрдВ

ЁЯЫая╕П рддрдХрдиреАрдХреА рдХреМрд╢рд▓:
тАв рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ: FreeCodeCamp, Codecademy
тАв рдбрд┐рдЬрд╝рд╛рдЗрди: Adobe Creative Suite рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓
тАв рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг: Kaggle Learn
тАв рдбрд┐рдЬрд┐рдЯрд▓ рдорд╛рд░реНрдХреЗрдЯрд┐рдВрдЧ: Google Digital Garage

ЁЯТ╝ рд╕реЙрдлреНрдЯ рд╕реНрдХрд┐рд▓реНрд╕:
тАв рд╕рдВрдЪрд╛рд░: Toastmasters
тАв рдиреЗрддреГрддреНрд╡: LinkedIn Learning
тАв рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкреНрд░рдмрдВрдзрди: PMI рд╕рдВрд╕рд╛рдзрди`,
        kn: `р▓ир▓┐р▓ор│Нр▓о р▓Хр│Мр▓╢р▓▓р│Нр▓пр▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р│Бр▓зр▓╛р▓░р▓┐р▓╕р│Бр▓╡ р▓ор▓╛р▓░р│Нр▓Чр▓Чр▓│р│Б:

ЁЯУЪ р▓Жр▓ир│НтАМр▓▓р│Ир▓ир│Н р▓Хр▓▓р▓┐р▓Хр│Ж р▓╡р│Зр▓жр▓┐р▓Хр│Жр▓Чр▓│р│Б:
тАв Coursera - р▓╡р│Гр▓др│Нр▓др▓┐р▓кр▓░ р▓кр│Нр▓░р▓ор▓╛р▓гр▓кр▓др│Нр▓░р▓Чр▓│р│Б
тАв edX - р▓╡р▓┐р▓╢р│Нр▓╡р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓▓р▓п р▓Хр│Лр▓░р│Нр▓╕р│НтАМр▓Чр▓│р│Б
тАв Udemy - р▓кр│Нр▓░р▓╛р▓пр│Лр▓Чр▓┐р▓Х р▓Хр│Мр▓╢р▓▓р│Нр▓пр▓Чр▓│р│Б
тАв Khan Academy - р▓ор│Вр▓▓р▓нр│Вр▓д р▓Ер▓Вр▓╢р▓Чр▓│р│Б

ЁЯЫая╕П р▓др▓╛р▓Вр▓др│Нр▓░р▓┐р▓Х р▓Хр│Мр▓╢р▓▓р│Нр▓пр▓Чр▓│р│Б:
тАв р▓кр│Нр▓░р│Лр▓Чр│Нр▓░р▓╛р▓ор▓┐р▓Вр▓Чр│Н: FreeCodeCamp, Codecademy
тАв р▓бр▓┐р▓╕р│Ир▓ир│Н: Adobe Creative Suite р▓Яр│Нр▓пр│Бр▓Яр│Лр▓░р▓┐р▓пр▓▓р│НтАМр▓Чр▓│р│Б
тАв р▓бр│Зр▓Яр▓╛ р▓╡р▓┐р▓╢р│Нр▓▓р│Зр▓╖р▓гр│Ж: Kaggle Learn
тАв р▓бр▓┐р▓Ьр▓┐р▓Яр▓▓р│Н р▓ор▓╛р▓░р│Нр▓Хр│Жр▓Яр▓┐р▓Вр▓Чр│Н: Google Digital Garage`,
        ta: `роЙроЩрпНроХро│рпН родро┐ро▒ройрпНроХро│рпИ роорпЗроорпНрокроЯрпБродрпНродрпБроорпН ро╡ро┤ро┐роХро│рпН:

ЁЯУЪ роЖройрпНро▓рпИройрпН роХро▒рпНро▒ро▓рпН родро│роЩрпНроХро│рпН:
тАв Coursera - родрпКро┤ро┐ро▓рпНроорпБро▒рпИ роЪро╛ройрпНро▒ро┐родро┤рпНроХро│рпН
тАв edX - рокро▓рпНроХро▓рпИроХрпНроХро┤роХ рокроЯро┐рокрпНрокрпБроХро│рпН
тАв Udemy - роироЯрпИроорпБро▒рпИ родро┐ро▒ройрпНроХро│рпН
тАв Khan Academy - роЕроЯро┐рокрпНрокроЯрпИроХро│рпН

ЁЯЫая╕П родрпКро┤ро┐ро▓рпНроирпБроЯрпНрок родро┐ро▒ройрпНроХро│рпН:
тАв роиро┐ро░ро▓ро╛роХрпНроХроорпН: FreeCodeCamp, Codecademy
тАв ро╡роЯро┐ро╡роорпИрокрпНрокрпБ: Adobe Creative Suite рокропро┐ро▒рпНроЪро┐роХро│рпН
тАв родро░ро╡рпБ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ: Kaggle Learn
тАв роЯро┐роЬро┐роЯрпНроЯро▓рпН рооро╛ро░рпНроХрпНроХрпЖроЯрпНроЯро┐роЩрпН: Google Digital Garage`,
      }
      return responses[language] || responses.en
    }

    // PM Internship Scheme questions
    if (lowerMessage.includes("pm internship") || lowerMessage.includes("scheme") || lowerMessage.includes("program")) {
      const responses = {
        en: `About the PM Internship Scheme:

ЁЯОп Objective: Provide practical work experience to students and recent graduates

ЁЯУЛ Eligibility:
тАв Students in final year of graduation/post-graduation
тАв Recent graduates (within 2 years)
тАв Age limit: 21-24 years

ЁЯТ░ Benefits:
тАв Monthly stipend of тВ╣5,000
тАв Certificate of completion
тАв Real work experience
тАв Networking opportunities

тП░ Duration: 6-12 months depending on the internship

ЁЯУН Sectors: Technology, Healthcare, Finance, Education, Government, and more

Apply through this portal to get matched with suitable opportunities!`,
        hi: `PM рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдпреЛрдЬрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ:

ЁЯОп рдЙрджреНрджреЗрд╢реНрдп: рдЫрд╛рддреНрд░реЛрдВ рдФрд░ рд╣рд╛рд▓ рдХреЗ рд╕реНрдирд╛рддрдХреЛрдВ рдХреЛ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрд╛рд░реНрдп рдЕрдиреБрднрд╡ рдкреНрд░рджрд╛рди рдХрд░рдирд╛

ЁЯУЛ рдкрд╛рддреНрд░рддрд╛:
тАв рд╕реНрдирд╛рддрдХ/рд╕реНрдирд╛рддрдХреЛрддреНрддрд░ рдХреЗ рдЕрдВрддрд┐рдо рд╡рд░реНрд╖ рдХреЗ рдЫрд╛рддреНрд░
тАв рд╣рд╛рд▓ рдХреЗ рд╕реНрдирд╛рддрдХ (2 рд╡рд░реНрд╖ рдХреЗ рднреАрддрд░)
тАв рдЖрдпреБ рд╕реАрдорд╛: 21-24 рд╡рд░реНрд╖

ЁЯТ░ рд▓рд╛рдн:
тАв тВ╣5,000 рдорд╛рд╕рд┐рдХ рд╡рдЬреАрдлрд╛
тАв рдкреВрд░реНрдгрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░
тАв рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХрд╛рд░реНрдп рдЕрдиреБрднрд╡
тАв рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдХреЗ рдЕрд╡рд╕рд░

тП░ рдЕрд╡рдзрд┐: рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдХреЗ рдЖрдзрд╛рд░ рдкрд░ 6-12 рдорд╣реАрдиреЗ

ЁЯУН рдХреНрд╖реЗрддреНрд░: рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА, рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реЗрд╡рд╛, рд╡рд┐рддреНрдд, рд╢рд┐рдХреНрд╖рд╛, рд╕рд░рдХрд╛рд░, рдФрд░ рдЕрдзрд┐рдХ`,
        kn: `PM р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓пр│Лр▓Ьр▓ир│Жр▓п р▓мр▓Чр│Нр▓Чр│Ж:

ЁЯОп р▓Йр▓жр│Нр▓жр│Зр▓╢: р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓Зр▓др│Нр▓др│Ар▓Ър▓┐р▓и р▓кр▓жр▓╡р│Ар▓зр▓░р▓░р▓┐р▓Чр│Ж р▓кр│Нр▓░р▓╛р▓пр│Лр▓Чр▓┐р▓Х р▓Хр│Жр▓▓р▓╕р▓ж р▓Ер▓ир│Бр▓нр▓╡р▓╡р▓ир│Нр▓ир│Б р▓Тр▓жр▓Чр▓┐р▓╕р│Бр▓╡р│Бр▓жр│Б

ЁЯУЛ р▓Ер▓░р│Нр▓╣р▓др│Ж:
тАв р▓кр▓жр▓╡р▓┐/р▓╕р│Нр▓ир▓╛р▓др▓Хр│Лр▓др│Нр▓др▓░ р▓Ер▓Вр▓др▓┐р▓о р▓╡р▓░р│Нр▓╖р▓ж р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓Чр▓│р│Б
тАв р▓Зр▓др│Нр▓др│Ар▓Ър▓┐р▓и р▓кр▓жр▓╡р│Ар▓зр▓░р▓░р│Б (2 р▓╡р▓░р│Нр▓╖р▓Чр▓│р│Кр▓│р▓Чр│Ж)
тАв р▓╡р▓пр▓╕р│Нр▓╕р▓┐р▓и р▓ор▓┐р▓др▓┐: 21-24 р▓╡р▓░р│Нр▓╖р▓Чр▓│р│Б

ЁЯТ░ р▓кр│Нр▓░р▓пр│Лр▓Ьр▓ир▓Чр▓│р│Б:
тАв тВ╣5,000 р▓ор▓╛р▓╕р▓┐р▓Х р▓╕р│Нр▓Яр│Ир▓кр│Жр▓Вр▓бр│Н
тАв р▓кр│Вр▓░р│Нр▓гр▓Чр│Кр▓│р▓┐р▓╕р│Бр▓╡р▓┐р▓Хр│Жр▓п р▓кр│Нр▓░р▓ор▓╛р▓гр▓кр▓др│Нр▓░
тАв р▓ир▓┐р▓Ьр▓╡р▓╛р▓ж р▓Хр│Жр▓▓р▓╕р▓ж р▓Ер▓ир│Бр▓нр▓╡
тАв р▓ир│Жр▓Яр│НтАМр▓╡р▓░р│Нр▓Хр▓┐р▓Вр▓Чр│Н р▓Ер▓╡р▓Хр▓╛р▓╢р▓Чр▓│р│Б`,
        ta: `PM роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН родро┐роЯрпНроЯроорпН рокро▒рпНро▒ро┐:

ЁЯОп роирпЛроХрпНроХроорпН: рооро╛рогро╡ро░рпНроХро│рпН рооро▒рпНро▒рпБроорпН роЪроорпАрокродрпНродро┐роп рокроЯрпНроЯродро╛ро░ро┐роХро│рпБроХрпНроХрпБ роироЯрпИроорпБро▒рпИ рокрогро┐ роЕройрпБрокро╡роорпН ро╡ро┤роЩрпНроХрпБродро▓рпН

ЁЯУЛ родроХрпБродро┐:
тАв рокроЯрпНроЯроорпН/роорпБродрпБроХро▓рпИ роЗро▒рпБродро┐ роЖрогрпНроЯрпБ рооро╛рогро╡ро░рпНроХро│рпН
тАв роЪроорпАрокродрпНродро┐роп рокроЯрпНроЯродро╛ро░ро┐роХро│рпН (2 роЖрогрпНроЯрпБроХро│рпБроХрпНроХрпБро│рпН)
тАв ро╡ропродрпБ ро╡ро░роорпНрокрпБ: 21-24 роЖрогрпНроЯрпБроХро│рпН

ЁЯТ░ роиройрпНроорпИроХро│рпН:
тАв тВ╣5,000 рооро╛родро╛роирпНродро┐ро░ роЙродро╡ро┐родрпНродрпКроХрпИ
тАв роиро┐ро▒рпИро╡рпБ роЪро╛ройрпНро▒ро┐родро┤рпН
тАв роЙрогрпНроорпИропро╛рой рокрогро┐ роЕройрпБрокро╡роорпН
тАв роирпЖроЯрпНро╡рпКро░рпНроХрпНроХро┐роЩрпН ро╡ро╛ропрпНрокрпНрокрпБроХро│рпН`,
      }
      return responses[language] || responses.en
    }

    // Default response
    const defaultResponses = {
      en: `I can help you with:
тАв Resume upload and optimization tips
тАв Understanding match percentages
тАв Skill improvement recommendations
тАв PM Internship Scheme information
тАв General guidance on internship applications

Please ask me about any of these topics!`,
      hi: `рдореИрдВ рдЖрдкрдХреА рдЗрдирдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ:
тАв рд░рд┐рдЬреНрдпреВрдореЗ рдЕрдкрд▓реЛрдб рдФрд░ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝реЗрд╢рди рдЯрд┐рдкреНрд╕
тАв рдореИрдЪ рдкреНрд░рддрд┐рд╢рдд рд╕рдордЭрдирд╛
тАв рдХреМрд╢рд▓ рд╕реБрдзрд╛рд░ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ
тАв PM рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдпреЛрдЬрдирд╛ рдХреА рдЬрд╛рдирдХрд╛рд░реА
тАв рдЗрдВрдЯрд░реНрдирд╢рд┐рдк рдЖрд╡реЗрджрди рдкрд░ рд╕рд╛рдорд╛рдиреНрдп рдорд╛рд░реНрдЧрджрд░реНрд╢рди

рдХреГрдкрдпрд╛ рдореБрдЭрд╕реЗ рдЗрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рднреА рд╡рд┐рд╖рдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫреЗрдВ!`,
      kn: `р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор▓Чр│Ж р▓Зр▓╡р│Бр▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б:
тАв р▓░р│Жр▓╕р│Нр▓пр│Вр▓ор│Н р▓Ер▓кр│НтАМр▓▓р│Лр▓бр│Н р▓ор▓др│Нр▓др│Б р▓Жр▓кр│Нр▓Яр▓┐р▓ор│Ир▓╕р│Зр▓╢р▓ир│Н р▓╕р▓▓р▓╣р│Жр▓Чр▓│р│Б
тАв р▓ор│Нр▓пр▓╛р▓Ър│Н р▓╢р│Зр▓Хр▓бр▓╛р▓╡р▓╛р▓░р│Б р▓Ер▓░р│Нр▓ер▓ор▓╛р▓бр▓┐р▓Хр│Кр▓│р│Нр▓│р│Бр▓╡р│Бр▓жр│Б
тАв р▓Хр│Мр▓╢р▓▓р│Нр▓п р▓╕р│Бр▓зр▓╛р▓░р▓гр│Ж р▓╢р▓┐р▓лр▓╛р▓░р▓╕р│Бр▓Чр▓│р│Б
тАв PM р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓пр│Лр▓Ьр▓ир│Жр▓п р▓ор▓╛р▓╣р▓┐р▓др▓┐
тАв р▓Зр▓Вр▓Яр▓░р│Нр▓ир│НтАМр▓╢р▓┐р▓кр│Н р▓Ер▓░р│Нр▓Ьр▓┐р▓Чр▓│ р▓мр▓Чр│Нр▓Чр│Ж р▓╕р▓╛р▓ор▓╛р▓ир│Нр▓п р▓ор▓╛р▓░р│Нр▓Чр▓жр▓░р│Нр▓╢р▓и

р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓И р▓╡р▓┐р▓╖р▓пр▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓пр▓╛р▓╡р│Бр▓жр▓╛р▓жр▓░р│В р▓мр▓Чр│Нр▓Чр│Ж р▓ир▓ир│Нр▓ир▓ир│Нр▓ир│Б р▓Хр│Зр▓│р▓┐!`,
      ta: `роиро╛ройрпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роЗро╡ро▒рпНро▒ро┐ро▓рпН роЙродро╡ роорпБроЯро┐ропрпБроорпН:
тАв ро░рпЖро╕рпНропрпВроорпН рокродро┐ро╡рпЗро▒рпНро▒роорпН рооро▒рпНро▒рпБроорпН роорпЗроорпНрокроЯрпБродрпНродро▓рпН роХрпБро▒ро┐рокрпНрокрпБроХро│рпН
тАв рокрпКро░рпБродрпНрод роЪродро╡рпАродродрпНродрпИ рокрпБро░ро┐роирпНродрпБроХрпКро│рпНро│рпБродро▓рпН
тАв родро┐ро▒ройрпН роорпЗроорпНрокро╛роЯрпНроЯрпБ рокро░ро┐роирпНродрпБро░рпИроХро│рпН
тАв PM роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН родро┐роЯрпНроЯ родроХро╡ро▓рпН
тАв роЗройрпНроЯро░рпНройрпНро╖ро┐рокрпН ро╡ро┐рогрпНрогрокрпНрокроЩрпНроХро│рпН рокро▒рпНро▒ро┐роп рокрпКродрпБро╡ро╛рой ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпН

родропро╡рпБроЪрпЖропрпНродрпБ роЗроирпНрод родро▓рпИрокрпНрокрпБроХро│ро┐ро▓рпН роПродрпЗройрпБроорпН роТройрпНро▒рпИрокрпН рокро▒рпНро▒ро┐ роОройрпНройро┐роЯроорпН роХрпЗро│рпБроЩрпНроХро│рпН!`,
    }
    return defaultResponses[language] || defaultResponses.en
  }

  const handleSendMessage = async () => {
    if (!inputValue.trim()) return

    const userMessage: Message = {
      id: Date.now().toString(),
      type: "user",
      content: inputValue,
      timestamp: new Date(),
    }

    setMessages((prev) => [...prev, userMessage])
    setInputValue("")
    setIsTyping(true)

    // Simulate typing delay
    setTimeout(
      () => {
        const botResponse = getBotResponse(inputValue)
        const botMessage: Message = {
          id: (Date.now() + 1).toString(),
          type: "bot",
          content: botResponse,
          timestamp: new Date(),
        }
        setMessages((prev) => [...prev, botMessage])
        setIsTyping(false)
      },
      1000 + Math.random() * 1000,
    ) // 1-2 second delay
  }

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault()
      handleSendMessage()
    }
  }

  return (
    <>
      {/* Chatbot Toggle Button */}
      <Button
        onClick={() => setIsOpen(true)}
        className="fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg z-50"
        size="icon"
      >
        <MessageCircle className="h-6 w-6" />
        <span className="sr-only">Open AI Assistant</span>
      </Button>

      {/* Chatbot Window */}
      {isOpen && (
        <Card className="fixed bottom-6 right-6 w-96 h-[500px] shadow-xl z-50 flex flex-col">
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <CardTitle className="text-lg flex items-center gap-2">
              <Bot className="h-5 w-5 text-primary" />
              {t("common.assistant") || "AI Assistant"}
            </CardTitle>
            <Button variant="ghost" size="icon" onClick={() => setIsOpen(false)} className="h-6 w-6">
              <X className="h-4 w-4" />
            </Button>
          </CardHeader>

          <CardContent className="flex-1 flex flex-col p-0">
            {/* Messages Area */}
            <ScrollArea className="flex-1 p-4">
              <div className="space-y-4">
                {messages.map((message) => (
                  <div
                    key={message.id}
                    className={`flex gap-2 ${message.type === "user" ? "justify-end" : "justify-start"}`}
                  >
                    {message.type === "bot" && (
                      <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                        <Bot className="h-4 w-4 text-primary" />
                      </div>
                    )}
                    <div
                      className={`max-w-[80%] rounded-lg px-3 py-2 text-sm whitespace-pre-wrap ${
                        message.type === "user" ? "bg-primary text-primary-foreground ml-auto" : "bg-muted"
                      }`}
                    >
                      {message.content}
                    </div>
                    {message.type === "user" && (
                      <div className="w-8 h-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0">
                        <User className="h-4 w-4 text-primary-foreground" />
                      </div>
                    )}
                  </div>
                ))}

                {isTyping && (
                  <div className="flex gap-2 justify-start">
                    <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                      <Bot className="h-4 w-4 text-primary" />
                    </div>
                    <div className="bg-muted rounded-lg px-3 py-2 text-sm">
                      <div className="flex gap-1">
                        <div className="w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"></div>
                        <div
                          className="w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"
                          style={{ animationDelay: "0.1s" }}
                        ></div>
                        <div
                          className="w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce"
                          style={{ animationDelay: "0.2s" }}
                        ></div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
              <div ref={messagesEndRef} />
            </ScrollArea>

            {/* Input Area */}
            <div className="border-t p-4">
              <div className="flex gap-2">
                <Input
                  value={inputValue}
                  onChange={(e) => setInputValue(e.target.value)}
                  onKeyPress={handleKeyPress}
                  placeholder={t("chatbot.placeholder") || "Ask me anything..."}
                  className="flex-1"
                  disabled={isTyping}
                />
                <Button onClick={handleSendMessage} disabled={!inputValue.trim() || isTyping} size="icon">
                  <Send className="h-4 w-4" />
                </Button>
              </div>
            </div>
          </CardContent>
        </Card>
      )}
    </>
  )
}
